# å¾®ä¿¡å°ç¨‹åº

åŸºäº `Taro | React | Typescript` å¹¶ä¾èµ–è…¾è®¯äº‘å¼€å‘çš„å¾®ä¿¡å°ç¨‹åºè„šæ‰‹æ¶

## å‡†å¤‡

> å‡†å¤‡ä¸€æ¬¡å³å¯ï¼Œä¸éœ€è¦é‡å¤

1. åœ¨å½“å‰é¡¹ç›®æ‰€å±æ ¹ç›®å½•ä¸‹ï¼Œå‡†å¤‡å¯¹åº”çš„**äº‘å‡½æ•°**å·¥ç¨‹ï¼Œéœ€è¦é…åˆäº‘å‡½æ•°æ‰èƒ½è¿›è¡Œå¼€å‘
2. åœ¨å½“å‰é¡¹ç›®æ‰€å±æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºæ–‡ä»¶åä¸º `wxapp-dist/functions` çš„æ–‡ä»¶
3. å¤åˆ¶ `project.config.example.json` ä¸º `project.config.json` å¹¶é…ç½®å¿…é¡»çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ `appid`ï¼Œå¹¶æ‹·è´è‡³ `wxapp-dist` ä¸­
4. å‡†å¤‡ç¯å¢ƒå˜é‡
5. é¦–æ¬¡æ‰§è¡Œå®Œæˆ `yarn dev` åï¼ˆç¡®è®¤ç¼–è¯‘æ— è¯¯ï¼‰ï¼Œå°†å°ç¨‹åºå¼€å‘è€…å·¥å…·æŒ‡å‘åˆšåˆ›å»ºçš„ `wxapp-dist` æ–‡ä»¶ï¼Œè¿›è¡Œå¼€å‘

### ç¯å¢ƒå˜é‡

1. å¤åˆ¶ `.env.example` ä¸º `.env.dev` å¹¶æ ¹æ®éœ€æ±‚å¡«å†™å¯¹åº”çš„ç¯å¢ƒå˜é‡ï¼ˆå‡å¿…å¡«ï¼‰
2. è‹¥æœ‰è‡ªå®šä¹‰ç‰¹æ®Šçš„ç¯å¢ƒå˜é‡ï¼Œç›´æ¥æ·»åŠ å³å¯ï¼ˆå»ºè®®ä½¿ç”¨ `TARO_PUBLIC_` å˜é‡åä¸ºå‰ç¼€ï¼Œå¥½åŒºåˆ†ï¼‰

## å¼€å‘

1. æ‰§è¡Œ `yarn dev` å¼€å§‹å¼€å‘
2. å°†å°ç¨‹åºå¼€å‘è€…å·¥å…·æŒ‡å‘è¯¥é¡¹ç›®æ‰€å±æ ¹ç›®å½•ä¸‹çš„ `wxapp-dist` æ–‡ä»¶

## å‘å¸ƒ

1. å¤åˆ¶ `.env.example` ä¸º `.env.prod` å¹¶æ ¹æ®éœ€æ±‚å¡«å†™å¯¹åº”çš„ç¯å¢ƒå˜é‡ï¼ˆå‡å¿…å¡«ï¼‰
2. è‹¥æœ‰è‡ªå®šä¹‰ç‰¹æ®Šçš„ç¯å¢ƒå˜é‡ï¼Œç›´æ¥æ·»åŠ å³å¯ï¼ˆå»ºè®®ä½¿ç”¨ `TARO_PUBLIC_` å˜é‡åä¸ºå‰ç¼€ï¼Œå¥½åŒºåˆ†ï¼‰
3. æ‰§è¡Œ `yarn build` æ‰“åŒ…å°ç¨‹åº
4. è¿›å…¥å°ç¨‹åºå¼€å‘è€…å·¥å…·è¿›è¡Œå‘å¸ƒ

## å¸¸ç”¨è„šæœ¬

```bash
# åˆ›å»ºé¡µé¢ç»„ä»¶
yarn gen:page path/to/new-page [é¡µé¢æ ‡é¢˜]

# åˆ›å»ºç»„ä»¶
yarn gen:comp path/to/MyComponent [ç»„ä»¶è¯´æ˜]
```

### æ›´æ–° Taro

> å»ºè®®ä¸è¦é¢‘ç¹æ›´æ–°ï¼›ç‰¹åˆ«æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œå»ºè®®å¾…å®˜æ–¹å‘å¸ƒä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬åï¼Œå†å‡çº§

1. åˆ é™¤ `./node_modules` & `./yarn.lock`
2. åœ¨ `./package.json` ä¸­ï¼Œæ ¹æ®å½“å‰ `@tarojs/taro` ç‰ˆæœ¬å·åœ¨å½“å‰æ–‡ä»¶å…¨å±€æŸ¥è¯¢ï¼Œå¹¶æ›¿æ¢ä¸º [release å®˜ç½‘](https://github.com/NervJS/taro/releases) çš„æœ€ç¨³å®šç‰ˆæœ¬å·
3. æ‰§è¡Œ `yarn` é‡æ–°å®‰è£…ä¾èµ–
4. éªŒè¯é¡¹ç›®æ˜¯å¦æ­£å¸¸è¿è¡Œï¼ˆä¸€èˆ¬å¤§ç‰ˆæœ¬æ›´æ–°ä¼šäº§ç”Ÿä¸å°‘é—®é¢˜ï¼‰

### æ›´æ–° Iconfont

1. ä»”ç»†é˜…è¯» [taro-iconfont-cli](https://github.com/iconfont-cli/taro-iconfont-cli) æ–‡æ¡£
   1. å›¾æ ‡å‰ç¼€é»˜è®¤ä¸º`icon-`ï¼Œå¦‚æœæœ‰è°ƒæ•´ï¼Œè¯·åŒæ—¶è°ƒæ•´`iconfont.json` æ–‡ä»¶ï¼ˆå»ºè®®ä¸è¦åšå‘½åä¸Šçš„è°ƒæ•´ï¼‰
   2. å»ºè®®ä½¿ç”¨å¢é‡æ›´æ–°ï¼Œä¸è¦éšæ„åˆ é™¤æˆ–è€…é‡å‘½åå›¾æ ‡
2. å½“æœ‰æ–°å›¾æ ‡ä¸Šä¼ ï¼Œç™»å½• [å®˜ç½‘](https://www.iconfont.cn/) è·å–æœ€æ–°é“¾æ¥ï¼Œä¿®æ”¹`iconfont.json`ä¸­çš„`symbol_url`å‚æ•°
3. æ‰§è¡Œ `yarn gen:icon` æ›´æ–°å›¾æ ‡

## æ³¨æ„äº‹é¡¹å’Œè¦æ±‚

1. æ³¨æ„ï¼šä¸è¦ä½¿ç”¨ preactï¼Œæš‚æ—¶æ— æ³•å…¼å®¹ windicssï¼Œä¼šå‡ºç° `Unsupported framework type` é—®é¢˜
2. è¦æ±‚ï¼šä½¿ç”¨ã€CSS å˜é‡ã€‘é…ç½®é¢œè‰²ï¼Œé…ç½®æ–‡ä»¶è§ [app.css](./src/app.css)ã€‚ç”Ÿæˆç®—æ³•è§ [Ant Design è‰²å½©](https://ant.design/docs/spec/colors-cn)ã€‚è‹¥éœ€è¦åœ¨è„šæœ¬ä¸­è·å–é¢œè‰²ï¼Œå¯ä»¥ä½¿ç”¨ `constConfig.colors`

## å‚è€ƒ

- [æ”¯æŒ preact](https://docs.taro.zone/blog/2021-11-24-Taro-3.4-beta#%E6%94%AF%E6%8C%81%E4%BD%BF%E7%94%A8-preact)
- [taro å¦‚ä½•é…ç½®å¤šä»½ç¯å¢ƒå˜é‡](https://github.com/NervJS/taro/issues/9838#issuecomment-1153659955)
- [æ”¯æŒ windicss](https://github.com/dcasia/mini-program-tailwind)

## Todo

- [x] feat: ğŸ¨ å¼•å…¥å›¾ç‰‡ä¼˜åŒ–ç»„ä»¶
- [x] feat: ğŸ¨ å¼•å…¥ windicss
- [x] upd: ğŸ’… å…¨é‡ä½¿ç”¨ windicss å¹¶ç§»é™¤å¯¹ css modules çš„æ”¯æŒ
- [x] upd: ğŸ’… å°† css variables æ›¿æ¢ä¸º windicss é…ç½®
- [ ] feat: ğŸ’… å¼•å…¥ turborepo ç®¡ç†é¡¹ç›®
- [ ] feat: ğŸ’» ä¸€é”®å‘å¸ƒå°ç¨‹åº
- [ ] fix: ğŸ› windicss ä½¿ç”¨ classnames æ—¶ï¼Œæ— æ³•å‡ºç°é™æ€æç¤ºã€‚è€ƒè™‘ä¸‹æ˜¯å¦å¯ä»¥æ”¹æˆ tailwindcss é…ç½®è§£å†³é—®é¢˜
