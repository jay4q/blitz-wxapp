# å¾®ä¿¡å°ç¨‹åº+äº‘å¼€å‘

## ğŸ“¦ å·¥ç¨‹ç»“æ„

> æ¯ä¸ªå­å·¥ç¨‹åŒ…éƒ½æ˜¯ç”¨ typescript ç¼–å†™

- `apps/app`: å¾®ä¿¡å°ç¨‹åº
- `apps/api`: æ¨¡æ‹Ÿ RESTful èƒ½åŠ›çš„å¾®ä¿¡å°ç¨‹åºäº‘å‡½æ•°
- `packages/db`: è¡¨å’Œè¡¨ç»“æ„å®šä¹‰ï¼Œè¿˜æœ‰ä¸€äº›å¸¸ç”¨å‡½æ•°

## ğŸ’» å‡†å¤‡å¼€å‘

### åˆ›å»ºç¼–è¯‘ç›®æ ‡æ–‡ä»¶å¤¹

> è¯¦ç»†é…ç½®å¯ä»¥å‚è€ƒ[å¾®ä¿¡å°ç¨‹åº-é¡¹ç›®é…ç½®æ–‡ä»¶](https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html)

1. åœ¨æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºæ–‡ä»¶åä¸º `wxapp-dist` çš„æ–‡ä»¶
2. å¤åˆ¶ project.config.example.json ä¸º project.config.jsonï¼Œé…ç½®å¿…é¡»çš„ä¿¡æ¯å¹¶æ”¾è‡³ `wxapp-dist` æ ¹ç›®å½•ä¸­

### é…ç½®ç¯å¢ƒå˜é‡

> æ³¨ï¼šç›®å‰éœ€è¦åˆ†å¼€é…ç½®ï¼Œåé¢å¯ä»¥è€ƒè™‘åˆå¹¶ä¸€ä¸‹

1. éœ€è¦åŒæ—¶é…ç½® `apps/app` å’Œ `apps/api` çš„ç¯å¢ƒå˜é‡
2. è¿›å…¥ `apps/app`ï¼Œå¤åˆ¶ .env.example ä¸º .env.dev å’Œ .env.prodï¼Œåˆ†åˆ«å¯¹åº”æœ¬åœ°/ç ”çº¿å’Œäº§çº¿ç¯å¢ƒ
3. åŒç† `apps/api`

### å¼€å§‹å¼€å‘

1. æ‰§è¡Œ `yarn dev` å³å¯
2. ç¡®è®¤ç¼–è¯‘æ— è¯¯åï¼Œå°†å°ç¨‹åºå¼€å‘è€…å·¥å…·æŒ‡å‘åˆšåˆ›å»ºçš„ `wxapp-dist` æ–‡ä»¶
3. åœ¨å°ç¨‹åºå¼€å‘è€…å·¥å…·ï¼Œå³é”® wxapp-dist/functions/wxapp-api -> å¼€å¯äº‘å‡½æ•°æœ¬åœ°è°ƒè¯•ï¼Œå³å¯åœ¨æœ¬åœ°è°ƒè¯•äº‘å‡½æ•°å¹¶è®©å°ç¨‹åºè¿æ¥æœ¬åœ°äº‘å‡½æ•°
   1. è‹¥ä»£ç ä¸­åŒ…å«è¿æ¥äº‘æ•°æ®åº“çš„è¯·æ±‚ï¼Œé¦–æ¬¡è¯·æ±‚å¯èƒ½ä¼šè¶…æ—¶ï¼ŒåŒ…æ‹¬çƒ­é‡è½½åçš„é¦–æ¬¡è¯·æ±‚ä¹Ÿæ˜¯ï¼Œç›®å‰è¿˜æœªæ‰¾åˆ°å¥½çš„è§£å†³æ–¹æ³•
   2. ä½¿ç”¨ `wx-server-sdk` æ¥å…¥äº‘æ•°æ®åº“ï¼Œä¸ä¼šå¯¼è‡´ä¸Šè¿°é—®é¢˜ã€‚ä½†æ˜¯è¿™ä¸ª sdk å®šä¹‰ä¸å¤Ÿå…¨ï¼Œå¯¹ typescript ç”¨æˆ·éå¸¸ä¸å‹å¥½

## ğŸ¤”ï¸ ä½¿ç”¨æŠ€å·§å’Œæ³¨æ„äº‹é¡¹

### å…³äº Monorepo

1. ä½¿ç”¨ `yarn workspace [work] add [libs]` ä¸ºæŸä¸ªç‰¹å®šçš„å·¥ç¨‹æ·»åŠ ä¾èµ–ã€‚ä¾‹å¦‚ `yarn workspace app add dayjs`ã€‚å‰ææ˜¯éœ€è¦åœ¨æ ¹ç›®å½•çš„ `package.json` ä¸­å£°æ˜å·¥ä½œåŒº `workspaces`
2. æ¥ä¸Šï¼Œè‹¥éœ€è¦åœ¨æ ¹ç›®å½•æ·»åŠ ä¾èµ–ï¼Œé‚£éœ€è¦æ˜¾å¼å£°æ˜ä¸º**éå·¥ä½œåŒº**ï¼Œå³ `yarn add -W [libs]` æˆ–è€… `yarn add -DW [libs]`
3. ä½¿ç”¨ yarn workspace å¯ä»¥èŠ‚çœä¸å°‘ç¡¬ç›˜ç©ºé—´ã€‚ä¾‹å¦‚å­å·¥ç¨‹å‡ä¾èµ– dayjs ç­‰ç›¸åŒä¾èµ–ï¼Œé‚£åªéœ€è¦åœ¨æ ¹ç›®å½•å®‰è£…ä¸€éå³å¯

## ğŸ“š æ–‡æ¡£

- [Tsup](https://tsup.egoist.sh/)
- [Taro](https://github.com/NervJS/taro)

## ğŸ“’ Todo

- [ ] æµ‹è¯•äº‘å‡½æ•°ä¸Šçº¿æ˜¯å¦å¯ç”¨
- [ ] éƒ¨ç½²è„šæœ¬å•ç‹¬åˆ—å‡º
- [ ] ç¯å¢ƒå˜é‡åˆå¹¶
- [ ] æ•°æ®åº“è¡¨å’Œè¡¨å®šä¹‰çš„å­å·¥ç¨‹
- [ ] fix: ğŸ› çƒ­æ›´æ–° db åï¼Œè‹¥äº‘å‡½æ•°å¼•ç”¨åˆ°äº† dbï¼Œäº‘å‡½æ•°ä¸ä¼šçƒ­æ›´æ–°ï¼Œå¿…é¡»å†è§¦å‘ä¸€ä¸‹äº‘å‡½æ•°çƒ­æ›´æ–°ã€‚å¯èƒ½éœ€è¦å…³é—­å¹¶è¡Œï¼Œä½¿ç”¨ dev:db => dev:api è¿™æ ·çš„æ–¹å¼ï¼Ÿ
